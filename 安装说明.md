# GAC Code å¤šå¹³å°çŠ¶æ€æ æ’ä»¶ - å®‰è£…ä½¿ç”¨æŒ‡å—

## ğŸ“– ç®€ä»‹

GAC Code å¤šå¹³å°çŠ¶æ€æ æ’ä»¶æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Claude Code æ‰©å±•ï¼Œæ”¯æŒå¤šä¸ª AI å¹³å°çš„å®æ—¶ä½™é¢æ˜¾ç¤ºã€ä¼šè¯æ˜ å°„å’Œæ™ºèƒ½å¹³å°æ£€æµ‹ã€‚

**æ”¯æŒçš„å¹³å°:**

- **GAC Code** - å®˜æ–¹å¹³å°
- **Kimi** - æœˆä¹‹æš—é¢ (Moonshot)
- **DeepSeek** - æ·±åº¦æ±‚ç´¢
- **SiliconFlow** - ç¡…æµ
- **Local Proxy** - æœ¬åœ°ä»£ç†

## ğŸš€ å¿«é€Ÿå®‰è£…

### 1. å‰ç½®ä¾èµ–

**å¿…éœ€ç»„ä»¶:**

- **Claude Code** - å·²å®‰è£…å¹¶å¯æ­£å¸¸ä½¿ç”¨
- **Python 3.7+** - ç”¨äºçŠ¶æ€æ è„šæœ¬å’Œå¹³å°ç®¡ç†
- **Git** - ç”¨äºä¸‹è½½é¡¹ç›® (å¯é€‰ï¼Œä¹Ÿå¯ç›´æ¥ä¸‹è½½)

**Windows é¢å¤–è¦æ±‚:**

- PowerShell 5.1+ (é€šå¸¸å·²å†…ç½®)

**Linux/Mac é¢å¤–è¦æ±‚:**

- bash shell (é€šå¸¸å·²å†…ç½®)
- `jq` å·¥å…· (æ¨èï¼Œç”¨äº JSON è§£æ)

### 2. ä¸‹è½½é¡¹ç›®

```bash
# æ–¹æ³•1: ä½¿ç”¨ Git å…‹éš†
git clone https://github.com/user/gaccode-statusline.git
cd gaccode-statusline

# æ–¹æ³•2: ç›´æ¥ä¸‹è½½è§£å‹
# ä» GitHub ä¸‹è½½ ZIPï¼Œè§£å‹åˆ°ä»»æ„ç›®å½•
```

### 3. é…ç½® API å¯†é’¥

ç¼–è¾‘ `examples/launcher-config.json` æ–‡ä»¶ï¼š

```json
{
  "platforms": {
    "gaccode": {
      "name": "GAC Code",
      "api_base_url": "https://relay05.gaccode.com/claudecode",
      "api_key": "sk-ant-xxx", // å¡«å…¥ä½ çš„ GAC Code API Key
      "login_token": "eyJhbGci...", // å¡«å…¥ä½ çš„ç™»å½•ä»¤ç‰Œ
      "enabled": true // è®¾ä¸º true å¯ç”¨
    },
    "kimi": {
      "name": "Kimi",
      "api_base_url": "https://api.moonshot.cn/anthropic",
      "auth_token": "sk-xxx", // å¡«å…¥ä½ çš„ Kimi API Key
      "model": "kimi-k2-0905-preview",
      "enabled": true // è®¾ä¸º true å¯ç”¨
    },
    "deepseek": {
      "name": "DeepSeek",
      "api_base_url": "https://api.deepseek.com/anthropic",
      "api_key": "sk-xxx", // å¡«å…¥ä½ çš„ DeepSeek API Key
      "model": "deepseek-chat",
      "enabled": true // è®¾ä¸º true å¯ç”¨
    },
    "siliconflow": {
      "name": "SiliconFlow",
      "api_base_url": "https://api.siliconflow.cn/",
      "api_key": "sk-xxx", // å¡«å…¥ä½ çš„ SiliconFlow API Key
      "model": "deepseek-ai/DeepSeek-V3.1",
      "enabled": true // è®¾ä¸º true å¯ç”¨
    }
  },
  "settings": {
    "default_platform": "gaccode", // é»˜è®¤å¹³å°
    "plugin_path": "../" // æ’ä»¶è·¯å¾„ï¼Œé€šå¸¸ä¸éœ€è¦ä¿®æ”¹
  }
}
```

### 4. é…ç½®çŠ¶æ€æ  (é‡è¦!)

å°†é¡¹ç›®ç›®å½•æ·»åŠ åˆ° Claude Code çš„çŠ¶æ€æ é…ç½®ä¸­ï¼š

**åœ¨ Claude Code ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤:**

```bash
# é…ç½®çŠ¶æ€æ æ˜¾ç¤º
python /path/to/gaccode-statusline/config-statusline.py --interactive
```

**æˆ–è€…æ‰‹åŠ¨æ·»åŠ åˆ° Claude Code é…ç½®æ–‡ä»¶:**

```json
{
  "statusLine": {
    "type": "command",
    "command": "python /path/to/gaccode-statusline/statusline.py",
    "refreshInterval": 1000
  }
}
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### Windows (PowerShell)

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd path\to\gaccode-statusline

# å¯åŠ¨ä¸åŒå¹³å° (ä½¿ç”¨åˆ«å)
.\examples\cc.mp.ps1 gc           # å¯åŠ¨ GAC Code
.\examples\cc.mp.ps1 dp           # å¯åŠ¨ DeepSeek
.\examples\cc.mp.ps1 kimi         # å¯åŠ¨ Kimi
.\examples\cc.mp.ps1 sf           # å¯åŠ¨ SiliconFlow

# ä½¿ç”¨å®Œæ•´å¹³å°å
.\examples\cc.mp.ps1 gaccode      # å¯åŠ¨ GAC Code
.\examples\cc.mp.ps1 deepseek     # å¯åŠ¨ DeepSeek

# ä¸æŒ‡å®šå¹³å° (ä½¿ç”¨é»˜è®¤å¹³å°)
.\examples\cc.mp.ps1

# ä¼ é€’é¢å¤–å‚æ•°ç»™ Claude Code
.\examples\cc.mp.ps1 dp --help
.\examples\cc.mp.ps1 kimi --version
```

### Linux/Mac (Bash)

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/gaccode-statusline

# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x examples/cc.mp.sh

# å¯åŠ¨ä¸åŒå¹³å° (ä½¿ç”¨åˆ«å)
./examples/cc.mp.sh gc            # å¯åŠ¨ GAC Code
./examples/cc.mp.sh dp            # å¯åŠ¨ DeepSeek
./examples/cc.mp.sh kimi          # å¯åŠ¨ Kimi
./examples/cc.mp.sh sf            # å¯åŠ¨ SiliconFlow

# ä½¿ç”¨å®Œæ•´å¹³å°å
./examples/cc.mp.sh gaccode       # å¯åŠ¨ GAC Code
./examples/cc.mp.sh deepseek      # å¯åŠ¨ DeepSeek

# ä¸æŒ‡å®šå¹³å° (ä½¿ç”¨é»˜è®¤å¹³å°)
./examples/cc.mp.sh

# ä¼ é€’é¢å¤–å‚æ•°ç»™ Claude Code
./examples/cc.mp.sh dp --help
./examples/cc.mp.sh kimi --version
```

## ğŸ”§ é«˜çº§é…ç½®

### å¹³å°åˆ«å

åœ¨ `launcher-config.json` ä¸­å¯ä»¥è‡ªå®šä¹‰å¹³å°åˆ«åï¼š

```json
{
  "aliases": {
    "gc": "gaccode", // gc â†’ gaccode
    "dp": "deepseek", // dp â†’ deepseek
    "ds": "deepseek", // ds â†’ deepseek
    "sf": "siliconflow", // sf â†’ siliconflow
    "kimi": "kimi", // kimi â†’ kimi
    "my": "gaccode" // è‡ªå®šä¹‰åˆ«å
  }
}
```

### çŠ¶æ€æ æ˜¾ç¤ºé…ç½®

```bash
# äº¤äº’å¼é…ç½®çŠ¶æ€æ æ˜¾ç¤ºé€‰é¡¹
python config-statusline.py --interactive

# æŸ¥çœ‹å½“å‰é…ç½®
python config-statusline.py --show

# è®¾ç½®ç‰¹å®šé€‰é¡¹
python config-statusline.py --set show_git_branch true
python config-statusline.py --set layout multi_line
```

### å¹³å°å¯†é’¥ç®¡ç†

```bash
# è®¾ç½® API å¯†é’¥
python platform_manager.py set-key deepseek "sk-your-key"
python platform_manager.py set-key kimi "sk-your-key"
python platform_manager.py set-key sf "sk-your-key"

# æŸ¥çœ‹å¹³å°çŠ¶æ€
python platform_manager.py list

# è·å–ç‰¹å®šå¹³å°å¯†é’¥
python platform_manager.py get-key gaccode
```

## ğŸ“Š çŠ¶æ€æ æ˜¾ç¤ºè¯´æ˜

å¯åŠ¨åï¼ŒClaude Code çŠ¶æ€æ ä¼šæ˜¾ç¤ºï¼š

```
Model:Claude 3.5 Sonnet Time:14:30:45 Today:$89.50 GAC.B:1500/12000 (35m12s) Dir:~/project
```

**æ˜¾ç¤ºå…ƒç´ è§£é‡Š:**

- `Model`: å½“å‰ä½¿ç”¨çš„ AI æ¨¡å‹
- `Time`: å½“å‰æ—¶é—´
- `Today`: ä»Šæ—¥æ¶ˆè´¹é‡‘é¢ (å¦‚æœæœ‰ä½¿ç”¨é‡è¿½è¸ª)
- `GAC.B:1500/12000`: GAC Code ä½™é¢/æ€»å®¹é‡
  - çº¢è‰² â‰¤ 500: ä½™é¢ä¸è¶³
  - é»„è‰² â‰¤ 1000: ä½™é¢è¾ƒä½
  - ç»¿è‰² > 1000: ä½™é¢å……è¶³
- `(35m12s)`: ä¸‹æ¬¡ä½™é¢åˆ·æ–°å€’è®¡æ—¶
- `Dir`: å½“å‰å·¥ä½œç›®å½•

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. çŠ¶æ€æ ä¸æ˜¾ç¤ºä½™é¢ä¿¡æ¯**

```bash
# æ£€æŸ¥å¹³å°æ£€æµ‹æ˜¯å¦æ­£å¸¸
python statusline.py
# è¾“å…¥æµ‹è¯•æ•°æ®: {"session_id":"test-uuid","model":{"display_name":"Test"}}

# æ£€æŸ¥ä¼šè¯æ˜ å°„æ–‡ä»¶
cat data/cache/session-mappings.json

# æŸ¥çœ‹æ—¥å¿—
tail -f data/logs/statusline.log
```

**2. å¹³å°æ£€æµ‹å¤±è´¥**

- ç¡®ä¿ä½¿ç”¨å¯åŠ¨è„šæœ¬ (`cc.mp.ps1` æˆ– `cc.mp.sh`) è€Œä¸æ˜¯ç›´æ¥è¿è¡Œ `claude`
- æ£€æŸ¥ API å¯†é’¥æ˜¯å¦æ­£ç¡®é…ç½®
- éªŒè¯ç½‘ç»œè¿æ¥

**3. API è°ƒç”¨å¤±è´¥**

```bash
# æµ‹è¯•ç‰¹å®šå¹³å° API è¿æ¥
python -c "
from platforms.gaccode import GACCodePlatform
import json
with open('data/config/platform-config.json', 'r', encoding='utf-8-sig') as f:
    config = json.load(f)
platform = GACCodePlatform(config['platforms']['gaccode']['api_key'], config['platforms']['gaccode'])
print(platform.fetch_balance_data())
"
```

**4. æƒé™é”™è¯¯ (Linux/Mac)**

```bash
# ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x examples/cc.mp.sh
chmod +x *.py
```

### è°ƒè¯•æ¨¡å¼

```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
tail -f data/logs/platform-manager.log
tail -f data/logs/statusline.log

# æµ‹è¯•å¹³å°ç®¡ç†å™¨
python platform_manager.py list --debug

# æ‰‹åŠ¨æµ‹è¯•çŠ¶æ€æ 
echo '{"session_id":"test","model":{"display_name":"Test"}}' | python statusline.py
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
gaccode-statusline/
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ cc.mp.ps1              # Windows å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ cc.mp.sh               # Linux/Mac å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ launcher-config.json   # å¹³å°é…ç½®æ–‡ä»¶
â”œâ”€â”€ platforms/                 # å¹³å°å®ç°
â”‚   â”œâ”€â”€ base.py               # åŸºç¡€å¹³å°ç±»
â”‚   â”œâ”€â”€ gaccode.py            # GAC Code å¹³å°
â”‚   â”œâ”€â”€ kimi.py               # Kimi å¹³å°
â”‚   â”œâ”€â”€ deepseek.py           # DeepSeek å¹³å°
â”‚   â””â”€â”€ siliconflow.py        # SiliconFlow å¹³å°
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ config/               # è¿è¡Œæ—¶é…ç½®
â”‚   â”œâ”€â”€ cache/                # ç¼“å­˜æ–‡ä»¶
â”‚   â””â”€â”€ logs/                 # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ statusline.py             # ä¸»çŠ¶æ€æ è„šæœ¬
â”œâ”€â”€ platform_manager.py      # å¹³å°ç®¡ç†å·¥å…·
â”œâ”€â”€ config-statusline.py     # çŠ¶æ€æ é…ç½®å·¥å…·
â””â”€â”€ å®‰è£…è¯´æ˜.md              # æœ¬æ–‡æ¡£
```

## ğŸ¤ æ”¯æŒä¸åé¦ˆ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ (`data/logs/`)
2. è¿è¡Œè¯Šæ–­å‘½ä»¤éªŒè¯é…ç½®
3. æ£€æŸ¥ API å¯†é’¥å’Œç½‘ç»œè¿æ¥
4. ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„å¯åŠ¨è„šæœ¬

äº«å—å¤šå¹³å° Claude Code ä½“éªŒï¼ ğŸ‰
